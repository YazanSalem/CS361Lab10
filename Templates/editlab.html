<!DOCTYPE html>
<html lang="en">
<head>
    <title> Edit Lab</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <meta charset="UTF-8">
</head>

<body>
<nav>
    <div class="nav-center">
        <h4>Edit Lab</h4>
        <ul class="nav-links">
            <li><a href="/../home/">Dashboard</a></li>
            <li><a href="/../createlab/">Create</a></li>
            <li><a href="/../deletelab/">Delete</a></li>
            <li><a href="../login/">Log Out</a></li>
        </ul>
    </div>
</nav>

<main>
    <div class="container">
        <form class="form-control" action="/editlab/" method="post">
            {% csrf_token %}
            <table border="1">
                <tr>
                    <th>ID</th>
                    <th>Course</th>
                    <th>Name</th>
                    <th>Location</th>
                    <th>Hours</th>
                    <th>Days</th>
                    <th>TA</th>
                </tr>
                {% for Lab in object_list %}
                    <tr>
                        {% if change_lab.labID == Lab.labID %}
                            <td>{{ Lab.labID }}</td>
                            <td>
                                <label for="course"></label>
                                <select name="course" id="course">
                                    {% for Course in Course_list %}
                                        <option value="{{ Course.courseID }}" {% if Lab in Course.lab_set.all %} selected {% endif %}>{{ Course.name }}</option>
                                    {% endfor %}
                                </select>
                            </td>
                            <td><label for=name></label><input type="text" id=name name=name value="{{ Lab.name }}"></td>
                            <td><label for=location></label><input type="text" id=location name=location value="{{ Lab.location }}"></td>
                            <td><label for=hours></label><input type="text" id=hours name=hours value="{{ Lab.hours }}"></td>
                            <td>
                                <label for="days"></label>
                                <select multiple name="days" id="days">
                                    <option value="M" {% if "M" in Lab.getDays %} selected {% endif %}>Monday</option>
                                    <option value="T" {% if "T" in Lab.getDays %} selected {% endif %}>Tuesday</option>
                                    <option value="W" {% if "W" in Lab.getDays %} selected {% endif %}>Wednesday</option>
                                    <option value="Th" {% if "Th" in Lab.getDays %} selected {% endif %}>Thursday</option>
                                    <option value="F" {% if "F" in Lab.getDays %} selected {% endif %}>Friday</option>
                                </select>
                            </td>
                            <td>
                                <label for="TA"></label>
                                <select name="TA" id="TA">
                                    {% for UserProfile in UserProfile_list %}
                                        {% if UserProfile.userType == "TA" %}
                                            <option value="{{ UserProfile.userID }}" {% if Lab in UserProfile.TAToLab.all %} selected {% endif %}>{{ UserProfile.username }}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            </td>
                            <td>
                                <button name="submit" type="submit" value="{{ Lab.labID }}">Submit</button>
                            </td>
                        {% else %}
                            <td>{{ Lab.labID }}</td>
                            <td>{{ Lab.course }}</td>
                            <td>{{ Lab.name }}</td>
                            <td>{{ Lab.location }}</td>
                            <td>{{ Lab.hours }}</td>
                            <td>{{ Lab.days }}</td>
                            <td>{{ Lab.TA }}</td>
                            {% if change_lab.labID == null %}
                                <td>
                                    <button name="edit" type="submit" value="{{ Lab.labID }}">Edit</button>
                                </td>
                            {% endif %}
                        {% endif %}
                    </tr>
                {% endfor %}
            </table>
        </form>
    </div>
</main>
<div class="container">
    <div class="row">
        <div class="column">
            <!--Context variables if there was an unsuccessful login, the 'error' & 'success' variable needs to be used in the CreateCourse.post() method-->
            {% if success %}
                {{ success }}
            {% endif %}

            {% if error %}
                {   { error }}
            {% endif %}
        </div>
    </div>
</div>
</body>

</html>
